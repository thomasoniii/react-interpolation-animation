{"version":3,"file":"index.js","sources":["../src/useInterpolate.js","../node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/@babel/runtime/helpers/esm/objectSpread2.js","../node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../src/constants.js","../src/Animation.js","../src/AnimationGroup.js","../src/Animator.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../src/AnimationConsumer.js"],"sourcesContent":["import { useRef, useEffect } from \"react\"\n\n/*\n  This is the meat of the library.\n  Set it up in your component like this:\n\n  const SomeReactComponent( { someValue } ) => {\n\n    // make a local copy of the variable that you're going to interpolate.\n    const [interpolatedSomeValue, setInterpolatedSomeValue] = useState(someValue);\n\n    // and then actually interpolate it.\n    useInterpolate(someValue, setInterpolatedSomeValue)\n\n    // later, when you would have done this:\n    // <div width = {someValue}>Some DIV element</div>\n    // instead do this:\n    <div width={interpolatedSomeValue}>Some DIV element</div>\n\n    // And you are done.\n  }\n\n  There is a third argument - an options object which you can pass along:\n\n    getDelta - should be a function which accepts a single object, which contains\n      three values - { to, from, percent }\n      from is the value at the start of the interpolation\n      to is the value at the end of the interpolation\n      percent is a float from 0->1 showing how far along the animation we are.\n      Pass this arg to change easing speed or animation effects, such as to use\n      a quadratic ease function or animate text typing.\n\n    duration - length of the animation in ms\n\n    getHasChanges - a function to determine if there are changes to the values.\n      should accept an object with two keys - current and previous\n      current is an object with key/value mapping at the end of the interpolation.\n      previous is an object with key/value mapping when the interpolation started.\n\n    initial - sometimes you want an interpolation to start from a different value\n      than the one initially set on the component when it is first mounted.\n      You can pass in a set of initial values to use here.\n\n    loop - repeat the animation from the beginning the specified number of times.\n      e.g., 5 repeats 5x, 10 repeats 10x.\n      0 is the default where it will not repeat.\n      -1 repeats infinite times.\n\n      Again, rememeber, it loops from the beginning.\n\n*/\n\n/*\n  The default delta easing. Given percent, from, and to.\n  Returns a value between from and to, at a given percentage, with linear easing.\n\n  e.g.,\n  animatorDefaultEasing({from : 50, to : 100, percent : .5})\n  // returns 75, since it's halfway between 50 and 100.\n\n  You can use this function if it is useful to you, and otherwise provide your own.\n*/\nexport const animatorDefaultEasing = ({ percent, from, to }) => {\n  return from + Math.min(1, percent) * (to - from)\n}\n\n/*\n  By default, if we have no previous values, we have no changes.\n  otherwise, if the two objects are not identical, we have changes.\n*/\nconst defaultHasChanges = (current, previous) =>\n  previous !== undefined && current !== previous\n\nconst useInterpolate = (\n  current,\n  setter,\n  {\n    getDelta = animatorDefaultEasing,\n    duration = 500,\n    getHasChanges = defaultHasChanges,\n    initial,\n    loop = 0,\n    onCompleteCallback = () => {},\n  } = {}\n) => {\n  // requestAnimationFrame starts ticking as soon as the page is loaded. We'll need\n  // to do conversions between absolute page load time vs relative interpolation time.\n  const startTime = useRef(performance.now())\n\n  // keep track of the last set of values at the start of the interpolation, defaulting\n  // to the initial values.\n  const previous = useRef(initial)\n\n  // keep track of the last frame of animation, in case we want to cancel it.\n  const lastFrame = useRef({})\n\n  // and further key each animation so we won't accidentally re-run something.\n  // const renderKey = useRef(1)\n\n  const hasChanges = getHasChanges(current, previous.current)\n\n  // if we have changes and are re-interpolating AND an animation frame is pending,\n  // then cancel it out and set our \"last\" values to wherever the interpolation had\n  // moved us to at that point. Then wipe out our lastFrame.\n  if (hasChanges && lastFrame.current.frame) {\n    cancelAnimationFrame(lastFrame.current.frame)\n    previous.current = lastFrame.current.delta\n    lastFrame.current = {}\n  }\n\n  // we enter the effect when hasChanges has changed.\n  useEffect(() => {\n    // blank out our last startTime, since we'll rewrite it in the animation frame.\n    startTime.current = undefined\n\n    // keep a ref to our previous values.\n    const prevVals = previous.current\n\n    // and increment our renderKey.\n    // const myKey = renderKey.current++\n\n    // the effect fires if hasChanges has changed. But we don't actually want to\n    // fire the animation unless hasChanges is actually true.\n    if (hasChanges) {\n      // request an animation frame and save it.\n      lastFrame.current.frame = requestAnimationFrame(function animate(time) {\n        // this is disabled for now for more testing.\n        /*\n        if (myKey !== renderKey.current) {\n          return;\n        }\n        //*/\n\n        // save the startTime on the first frame if we need to.\n        startTime.current = startTime.current || time\n\n        // and convert from absolute page time to relative interpolation time.\n        time -= startTime.current\n\n        // if our current time < duration, we're still interpolating.\n        // get newDelta values, call the setter with them, and save them along\n        // with requesting a new frame.\n        if (time < duration || loop--) {\n          // if (time < duration) {\n          const newDelta = getDelta({\n            from: prevVals,\n            to: current,\n            percent: time / duration,\n          })\n\n          setter(() => newDelta)\n          lastFrame.current.delta = newDelta\n\n          lastFrame.current.frame = requestAnimationFrame(animate)\n\n          if (loop && time >= duration) {\n            previous.current = prevVals\n            startTime.current = undefined\n          }\n        } else {\n          // otherwise, we've the duration. So we just call the setter with our final\n          // values, update our previous value, and wipe out the last frame.\n          setter(() => current)\n          previous.current = current\n          lastFrame.current = {}\n          onCompleteCallback({ from: prevVals, to: current })\n        }\n      })\n    }\n\n    // always save the new current values as the previous ones whenever we enter.\n    previous.current = current\n    // eslint-disable-next-line\n  }, [hasChanges]);\n}\n\nexport default useInterpolate\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n  if (_i == null) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n\n  var _s, _e;\n\n  try {\n    for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export const DEFAULT_DURATION = 500\n","import React, { useState } from \"react\"\nimport useInterpolate, { animatorDefaultEasing } from \"./useInterpolate\"\n\nimport { DEFAULT_DURATION } from \"./constants\"\n\n/*\n  I'm playing around with how I want to structure this code.\n  For now, an Animation is identical to an AnimationGroup, except it only accepts\n  one component via a render prop instead of a list of children.\n\n  You probably don't want to use this directly and probably want to import Animator\n  instead.\n\n  In fact, go look at the more thorough documentation over in Animator.\n*/\n\nconst ANIMATOR_INITIAL = \"animator-initial\"\n\nconst Animation = ({\n  values = [],\n  duration = DEFAULT_DURATION,\n  child,\n  easing = {},\n  defaultEasing = animatorDefaultEasing,\n  initial = {},\n  loop = 0,\n  onCompleteCallback,\n}) => {\n  // given our values array, look to the child to figure out our current values.\n  const current = values.reduce((bucket, v) => {\n    return { ...bucket, [v]: child.props[v] }\n  }, {})\n\n  // we're going to build a new initial object\n  const fullInitial = {}\n  // pull out any initial values set on the child\n  const childInit = child.props[ANIMATOR_INITIAL] || {}\n\n  // now iterate over our values (which is a list of keys)\n  // and set the initial value to the child's init value, our component init value, or the\n  // child's current prop value.\n  values.forEach((v) => {\n    fullInitial[v] = childInit[v] ?? initial[v] ?? current[v]\n  })\n\n  // standard useInterpolate call - save localValues to hand through to the child.\n  const [localValues, setLocalValues] = useState(fullInitial)\n  useInterpolate(current, setLocalValues, {\n    // here we have changes if any key in our current set of values has changed from\n    // our last set of values.\n    //\n    // remember - this is not all props on the child, this is just the props in our\n    // values array.\n    getHasChanges: (c, previous) =>\n      Boolean(\n        Object.keys(c).find((key) => previous && c[key] !== previous[key])\n      ),\n\n    duration,\n\n    initial: fullInitial,\n\n    loop,\n\n    // our getDelta function needs to construct a new object with each value interpolated\n    // along the way.\n    getDelta: ({ percent, from, to }) => {\n      return Object.keys(to).reduce((bucket, v) => {\n        const easingFunc = easing[v] || defaultEasing\n        const newValue = easingFunc({\n          from: from[v],\n          to: to[v],\n          percent,\n          value: v,\n        })\n        return {\n          ...bucket,\n          [v]: newValue,\n        }\n      }, {})\n    },\n\n    onCompleteCallback,\n  })\n\n  // finally, we're going to clone the child with the new props\n  // but toss out the animator-initial value: we don't need it any more and don't\n  // want it writing to the DOM.\n  return React.cloneElement(child, {\n    ...localValues,\n    [ANIMATOR_INITIAL]: undefined,\n  })\n}\n\nexport default Animation\n","/*\n  I'm playing around with how I want to structure this code.\n  For now, an AnimationGroup is identical to an Animation, except it allows you\n  to vend an animation out to multiple children. Animation only vends to one.\n\n  You probably don't want to use this directly and probably want to import Animator\n  instead.\n\n  In fact, go look at the more thorough documentation over in Animator.\n*/\n\nimport React from \"react\"\nimport Animation from \"./Animation\"\n\nconst AnimationGroup = (props) => {\n  const args = { ...props }\n  delete args.children\n  return React.Children.map(props.children, (child) => (\n    <Animation {...args} child={child} />\n  ))\n}\n\nexport default AnimationGroup\n","import React from \"react\"\nimport Animation from \"./Animation\"\nimport AnimationGroup from \"./AnimationGroup\"\n\nimport { DEFAULT_DURATION } from \"./constants\"\n\n/*\n  I'm playing around with how I want to structure this code.\n  For now, just use Animator and it'll work with as many children as you pass it,\n  deferring the actual work to an Animation or AnimationGroup component.\n\n  Say you have this element in an SVG graphic:\n  <rect x = {0} y = {10} width = {width} height = {10} fill = \"blue\" />\n\n  And you want to animate that width value, so when you change the value, the bar\n  animates to the new size. All you need to do is wrapper it with an Animator.\n\n  <Animator values = {[\"width\"]}>\n    <rect x = {x} y = {y} width = {width} height = {10} fill = \"blue\" />\n  </Animator>\n\n  If you want to animate all of those variables:\n  <Animator values = {[\"width\", \"x\", \"y\"]}>\n    <rect x = {x} y = {y} width = {width} height = {10} fill = \"blue\" />\n  </Animator>\n\n  Now if any (or all!) of x, y, or width change, it'll animate to the new position.\n\n  Animator (and the other verions it wrappers) accepts several props:\n\n    values - an array of strings to watch for changes. These props MUST be named\n      on the child components for them to be handed through.\n    duration - length of the interpolation duration in ms. Defaults to 500\n    easing - an object of { [value] : easingFunction }\n      the easingFunction is the same as the getDelta function in useInterpolate.\n      Accepts an arg of a single object of {from, to, percent}\n    defaultEasing - change the default easing used if a specific easing for a given\n      value is not provided.\n    initial - an object containing { [value] : initialValue } This is optional.\n      The initial object is used if you want to start from a different position.\n\n      For example:\n        <Animator values = {[\"x\"]}>\n          <rect x = {x} y = {0} width = {50} height = {50} />\n        </Animator>\n\n      Let's say the first time you mount the component, x = 50. It will draw immediately\n      at x ={50} w/o animation.\n\n      initial is used to provide that first transition into the DOM.\n        <Animator values = {[\"x\"]} initial = {{x : 0}}>\n          <rect x = {x} y = {0} width = {50} height = {50} />\n        </Animator>\n      This will mount the component with an x value of 0 and then interpolate it until it\n      reaches 50.\n\n      This is to keep your data value (which is x = 50) separate from a sugared animation value\n      (have it fly in from 0)\n\n    It's possible that child components should animate starting at different positions.\n    Animator looks for a prop on its children called `animator-initial`. If present, initial\n    values in there will be used.\n\n    The precedence for an intial value is:\n      child.animator-initial[value]\n      Animator.initial[value]\n      child.props[value]\n\n*/\n\nconst Animator = (props) => {\n  const args = {\n    duration: DEFAULT_DURATION,\n    ...props,\n  }\n\n  return React.Children.count(args.children) > 1 ? (\n    <AnimationGroup {...args} />\n  ) : (\n    <Animation {...args} child={React.Children.only(args.children)} />\n  )\n}\n\nexport default Animator\n","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose.js\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","/*\n  very simple component, just around as a reflector. Takes a render prop, then hands\n  all props it was given through to that render prop.\n\n  This is useful for cases where you want to provide an interpolated value to a child\n  component, but NOT as a prop of that component.\n\n  Or just roll your own flavor of this, I'm not your dad.\n*/\nconst AnimationConsumer = ({ render, ...props }) => {\n  return render(props)\n}\n\nexport default AnimationConsumer\n"],"names":["animatorDefaultEasing","percent","from","to","Math","min","defaultHasChanges","current","previous","undefined","useInterpolate","setter","getDelta","duration","getHasChanges","initial","loop","onCompleteCallback","startTime","useRef","performance","now","lastFrame","hasChanges","frame","cancelAnimationFrame","delta","useEffect","prevVals","requestAnimationFrame","animate","time","newDelta","defineProperty","arrayLikeToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","DEFAULT_DURATION","ANIMATOR_INITIAL","Animation","values","child","easing","defaultEasing","reduce","bucket","v","props","fullInitial","childInit","forEach","useState","localValues","setLocalValues","c","Boolean","Object","keys","find","key","easingFunc","newValue","value","React","cloneElement","AnimationGroup","args","children","Children","map","Animator","count","only","objectWithoutPropertiesLoose","AnimationConsumer","render"],"mappings":"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"}